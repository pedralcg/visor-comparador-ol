<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="icon" href="assets/img/favicon.ico" type="image/x-icon">
  <title>Comparador de Cartograf√≠a Hist√≥rica vs. Moderna</title>

  <!-- Meta SEO -->
  <meta name="description" content="Visor comparativo de cartograf√≠a hist√≥rica y actual para analizar la evoluci√≥n del paisaje y usos del suelo en la Regi√≥n de Murcia y otras zonas." />
  <meta name="keywords" content="cartograf√≠a hist√≥rica, cartograf√≠a moderna, mapas, visor, Regi√≥n de Murcia, OpenLayers" />

  <!-- Estilos y librer√≠as -->
  <link rel="stylesheet" href="./lib/ol.css" />
  <link rel="stylesheet" href="./lib/ol-ext.css" />
  <link rel="stylesheet" href="style.css" />
  <script src="./lib/proj4.min.js"></script>
  <script src="./lib/ol.js"></script>
  <script src="./lib/ol-ext.js"></script>
  <script src="./lib/html2canvas.min.js" defer></script>

  <script>
    proj4.defs("EPSG:25830", "+proj=utm +zone=30 +ellps=GRS80 +units=m +no_defs");
    ol.proj.proj4.register(proj4);
  </script>
</head>

<body>

  <!-- CONTENIDO PRINCIPAL -->
  <main>
    <h1 class="h1-title">Visor comparativo de cartograf√≠a hist√≥rica y actual</h1>
    
    <details class="intro-box" aria-expanded="false">
      <summary tabindex="0" role="button" aria-controls="intro-content">‚ÑπÔ∏è Descripci√≥n general del visor</summary>
      <div id="intro-content" class="intro-content">
        <p>
          Este visor permite comparar mapas hist√≥ricos y actuales para analizar la evoluci√≥n del paisaje, los usos del suelo o los cambios en infraestructuras. El deslizador central facilita una comparaci√≥n visual directa entre dos capas superpuestas.
        </p>
        <p><strong>Capas disponibles:</strong></p>
        <ul>
          <li><strong>Cartograf√≠a moderna:</strong> 
            <ul>
              <li><em>PNOA Actual</em> ‚Äî ortofoto a√©rea actualizada (Programa Nacional de Ortofotograf√≠a A√©rea).</li>
              <li><em>OpenStreetMap</em> ‚Äî cartograf√≠a libre basada en contribuciones ciudadanas.</li>
              <li><em>IGN Raster</em> ‚Äî mapa raster del Instituto Geogr√°fico Nacional a distintas escalas.</li>
            </ul>
          </li>
          <li><strong>Ortofotos y vuelos hist√≥ricos:</strong>
            <ul>
              <li><em>Vuelo Ruiz de Alda (1929‚Äì1930)</em> ‚Äî cobertura parcial, centrada principalmente en el sureste peninsular (Confederaci√≥n Hidrogr√°fica del Segura).</li>
              <li><em>Vuelo Americano Serie B (1956‚Äì1957)</em> ‚Äî cobertura nacional, aunque con calidad y disponibilidad variables seg√∫n la zona.</li>
              <li><em>Vuelo Interministerial (1973‚Äì1986)</em> ‚Äî cobertura limitada a ciertas comunidades aut√≥nomas; <strong>no incluye la Regi√≥n de Murcia</strong>.</li>
              <li><em>Vuelo Nacional (1981‚Äì1986)</em> ‚Äî cobertura limitada a ciertas comunidades aut√≥nomas; <strong>no incluye la Regi√≥n de Murcia</strong>.</li>
              <li><em>Vuelo OLISTAT (1997‚Äì1998)</em> ‚Äî cobertura parcial, disponible en regiones espec√≠ficas como Murcia y otras comunidades del sur, centro y √°reas mediterr√°neas peninsulares.</li>
            </ul>
          </li>
          <li><strong>Capas auxiliares:</strong>
            <ul>
              <li><em>T√©rminos municipales (IGN):</em> capa administrativa con los l√≠mites oficiales municipales de Espa√±a.</li>
              <li><em>Nombres geogr√°ficos (IGN):</em> puntos con top√≥nimos relevantes como montes, sierras, r√≠os o parajes.</li>
            </ul>
          </li>
        </ul>
        <p><strong>Herramientas disponibles:</strong></p>
        <ul>
          <li>B√∫squeda por top√≥nimo: municipios, parajes o lugares concretos.</li>
          <li>Carga de archivos vectoriales (GeoJSON, KML, GPX) para su visualizaci√≥n y an√°lisis.</li>
          <li>Herramientas de dibujo (puntos, l√≠neas, pol√≠gonos) y medici√≥n de distancias o superficies.</li>
          <li>Botones de utilidad: limpiar, recentrar el mapa y exportar la vista actual como imagen.</li>
        </ul>
        <p>
          Esta aplicaci√≥n est√° en continua evoluci√≥n. Se ir√°n incorporando nuevas funcionalidades, capas y mejoras en la interfaz. Si tienes sugerencias o detectas errores, puedes proponer mejoras directamente al autor.
        </p>
        <p>
          El visor est√° pensado para que cualquier persona interesada pueda explorar y conocer c√≥mo ha cambiado la regi√≥n a lo largo del tiempo, sin necesidad de conocimientos t√©cnicos.
        </p>
      </div>
    </details>

    <div class="map-and-tools">
      <!-- Sidebar lateral con controles -->
      <aside class="sidebar" role="complementary" aria-label="Herramientas del visor">
        <h1 class="sidebar-title">Herramientas del visor</h1>

        <!-- Gu√≠a de uso -->
        <details class="intro-box" aria-expanded="false">
          <summary tabindex="0" role="button" aria-controls="guide-content">‚ÑπÔ∏è C√≥mo utilizar el visor</summary>
          <div id="guide-content" class="intro-content">
            <ul>
              <li>Selecciona una capa moderna y otra hist√≥rica para compararlas.</li>
              <li>Usa el deslizador central para visualizar las diferencias entre ambas.</li>
              <li>Busca lugares por nombre (municipio, paraje...) con el buscador integrado.</li>
              <li>Activa o desactiva capas auxiliares como l√≠mites municipales o la base de nombres geogr√°ficos del IGN.</li>
              <li>Carga tus propios archivos vectoriales en formatos <strong>.GeoJSON, .KML, .GPX</strong> para analizarlos sobre el mapa.</li>
              <li>Dibuja elementos (puntos, l√≠neas, pol√≠gonos) directamente sobre el visor.</li>
              <li>Mide distancias o √°reas con las herramientas de medici√≥n, que te mostrar√°n los valores en metros, kil√≥metros o hect√°reas seg√∫n corresponda.</li>
              <li>Utiliza los botones de "Limpiar" y/o "Recentrar" para gestionar tu sesi√≥n de trabajo.</li>
            </ul>
            <p>
              Puedes combinar distintas funcionalidades para crear un an√°lisis visual adaptado a tus necesidades. La interfaz est√° dise√±ada para ser clara y √°gil, incluso en dispositivos de pantalla peque√±a.
            </p>
          </div>
        </details>

        <!-- Selector de capas -->
        <section aria-labelledby="title-capas">
          <h2 id="title-capas">Capas</h2>
          <div class="grupo-selectores fila">
            <div class="selector-capa">
              <label for="modern">Moderna:</label>
              <select id="modern" aria-label="Selector de capa moderna">
              </select>
            </div>
            <div class="selector-capa">
              <label for="historic">Hist√≥rica:</label>
              <select id="historic" aria-label="Selector de capa hist√≥rica">
              </select>
            </div>
          </div>
        </section>

        <hr />

        <section aria-labelledby="title-coberturas">
          <h2 id="title-coberturas">Coberturas auxiliares</h2>
          <label>
            <input type="checkbox" id="toggle-tm" checked aria-checked="true" />
            TM Regi√≥n de Murcia
          </label>
          <label>
            <input type="checkbox" id="toggle-nombresGeograficos" aria-checked="false" />
            Nombres Geogr√°ficos IGN
          </label>
        </section>

        <hr />

        <section aria-labelledby="title-buscador">
          <h2 id="title-buscador">Buscador de lugares</h2>
          <div class="buscador">
            <input type="text" id="search-input" placeholder="Buscar municipio o paraje..." aria-label="Campo de b√∫squeda de lugares" />
            <button id="search-btn" aria-label="Buscar lugar">Buscar</button>
          </div>
        </section>

        <hr />

        <section aria-labelledby="title-carga-archivos">
          <h2 id="title-carga-archivos">Cargar archivo de cobertura</h2>
          <h3>(GeoJSON, KML, GPX)</h3>
          <input
            type="file"
            id="file-input"
            multiple
            accept=".geojson,.json,.kml,.gpx,.zip"
            aria-label="Cargar archivo de cobertura vectorial"
          />
        </section>

        <hr />

        <section aria-labelledby="title-acciones">
          <h2 id="title-acciones">Acciones</h2>
          <div class="grupo-acciones">
            <button id="btn-clear" aria-label="Limpiar mapa">üóëÔ∏è Limpiar</button>
            <button id="btn-recentrar" aria-label="Recentrar mapa">üéØ Recentrar</button>
          </div>
        </section>

        <hr />

        <section aria-labelledby="title-dibujo">
          <h2 id="title-dibujo">Dibujo</h2>
          <div class="grupo-dibujo">
            <button id="btn-draw-point" title="Dibujar punto" aria-label="Dibujar punto">üìç Punto</button>
            <button id="btn-draw-line" title="Dibujar l√≠nea" aria-label="Dibujar l√≠nea">‚ûñ L√≠nea</button>
            <button id="btn-draw-polygon" title="Dibujar pol√≠gono" aria-label="Dibujar pol√≠gono">üü™ Pol√≠gono</button>
          </div>
        </section>

        <hr />

        <section aria-labelledby="title-medicion">
          <h2 id="title-medicion">Medici√≥n</h2>
          <div class="grupo-medicion">
            <button id="btn-medicion-linea" aria-label="Medir l√≠nea">üìè L√≠nea</button>
            <button id="btn-medicion-area" aria-label="Medir √°rea">üìê √Årea</button>
          </div>
        </section>
      </aside>

      <!-- Contenedor del visor -->
      <div id="map" class="map" role="region" aria-label="Mapa principal"></div>
    </div>
  </main>

  <!-- PIE DE P√ÅGINA -->
<footer class="footer">
  <div class="footer-top">
    <div class="footer-left">
      <img src="assets/img/logos/logo.png" alt="Logo Pedralcg" class="logo-footer" />
      <div class="footer-text">
        <div>¬© 2025 Pedro Alcoba G√≥mez</div>
        <div>@pedralcg</div>
      </div>
    </div>
    <div class="footer-center">Proyecto OpenLayers - Visor comparativo</div>
    <div class="footer-right">
      <div class="footer-enlaces">
        <a href="https://pedralcg.github.io" target="_blank" rel="noopener noreferrer">Mi web principal</a>
        <a href="https://github.com/pedralcg/visor-comparador-ol" target="_blank" rel="noopener noreferrer">Repositorio GitHub</a>
      </div>
      <div class="footer-contacto">
        ¬øAlgo no funciona correctamente? <a href="mailto:pedralcg.dev@gmail.com">Cont√°ctame</a>
      </div>
    </div>
  </div>
</footer>


  <!-- Script principal -->
  <script src="script.js" defer></script>
</body>
</html>
